(()=>{var t={288:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(601),r=n.n(i),o=n(314),s=n.n(o)()(r());s.push([t.id,"/*! modern-normalize v3.0.1 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n::before,\n::after {\n\tbox-sizing: border-box;\n}\n\nhtml {\n\t/* Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3) */\n\tfont-family:\n\t\tsystem-ui,\n\t\t'Segoe UI',\n\t\tRoboto,\n\t\tHelvetica,\n\t\tArial,\n\t\tsans-serif,\n\t\t'Apple Color Emoji',\n\t\t'Segoe UI Emoji';\n\tline-height: 1.15; /* 1. Correct the line height in all browsers. */\n\t-webkit-text-size-adjust: 100%; /* 2. Prevent adjustments of font size after orientation changes in iOS. */\n\ttab-size: 4; /* 3. Use a more readable tab size (opinionated). */\n}\n\n/*\nSections\n========\n*/\n\nbody {\n\tmargin: 0; /* Remove the margin in all browsers. */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct font weight in Chrome and Safari.\n*/\n\nb,\nstrong {\n\tfont-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n\tfont-family:\n\t\tui-monospace,\n\t\tSFMono-Regular,\n\t\tConsolas,\n\t\t'Liberation Mono',\n\t\tMenlo,\n\t\tmonospace; /* 1 */\n\tfont-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n\tfont-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n\tfont-size: 75%;\n\tline-height: 0;\n\tposition: relative;\n\tvertical-align: baseline;\n}\n\nsub {\n\tbottom: -0.25em;\n}\n\nsup {\n\ttop: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\nCorrect table border color inheritance in Chrome and Safari. (https://issues.chromium.org/issues/40615503, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n\tborder-color: currentcolor;\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n\tfont-family: inherit; /* 1 */\n\tfont-size: 100%; /* 1 */\n\tline-height: 1.15; /* 1 */\n\tmargin: 0; /* 2 */\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n\t-webkit-appearance: button;\n}\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n\tpadding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n\tvertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n\theight: auto;\n}\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n\t-webkit-appearance: textfield; /* 1 */\n\toutline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n\t-webkit-appearance: none;\n}\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n::-webkit-file-upload-button {\n\t-webkit-appearance: button; /* 1 */\n\tfont: inherit; /* 2 */\n}\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n\tdisplay: list-item;\n}\n",""]);const a=s},365:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var i=n(601),r=n.n(i),o=n(314),s=n.n(o),a=n(288),c=n(417),l=n.n(c),d=new URL(n(644),n.b),h=new URL(n(922),n.b),p=s()(r());p.i(a.A);var u=l()(d),m=l()(h);p.push([t.id,`@font-face {\n  font-family: "soda_shakeregular";\n  src:\n    url(${u}) format("woff2"),\n    url(${m}) format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n\n:root {\n  font-family: "soda_shakeregular", "Courier New", Courier, monospace;\n  --first-ply-clr: rgb(86, 202, 255);\n  --second-ply-clr: rgb(255, 77, 77);\n}\n\n.content {\n  display: flex;\n  justify-content: center;\n  gap: 5vw;\n}\n\n.playing-div {\n  display: grid;\n  grid-template-columns: auto auto;\n  grid-template-rows: 100px auto;\n  justify-items: center;\n  align-items: center;\n  gap: 0 20px;\n\n  margin-top: 10vh;\n}\n\n.ship-container {\n  position: relative;\n  padding: 20px;\n  background-color: #f3f3f3;\n  width: 15vw;\n  height: max(45vh, 100%);\n  border-radius: 20px;\n  box-shadow: 0 0 6px -3px;\n}\n\n.ship-container.opponent::before {\n  content: "Opponent ships";\n  font-size: 1.7rem;\n  position: absolute;\n  top: -1.9rem;\n}\n\n.ship-container.player::before {\n  content: "Your ships";\n  font-size: 1.7rem;\n  position: absolute;\n  top: -1.9rem;\n}\n\np {\n  font-size: 2rem;\n}\n\n.playing-div p.turn {\n  font-size: 3rem;\n  text-decoration: underline;\n  transition: font-size ease-in-out 0.1s;\n}\n\n#left-playing-div p {\n  grid-column: 2;\n  grid-row: 1;\n}\n\n#left-playing-div .main-grid-div {\n  grid-column: 2;\n  grid-row: 2;\n}\n\n#left-playing-div .ship-container {\n  grid-row: 2;\n  grid-column: 1;\n}\n\n#right-playing-div .main-grid-div {\n  grid-column: 1;\n  grid-row: 2;\n}\n\n#right-playing-div .ship-container {\n  grid-row: 2;\n  grid-column: 2;\n}\n\n.main-grid-div {\n  display: inline-grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  gap: 1px;\n\n  position: relative;\n  width: 25vw;\n  height: 25vw;\n  align-self: start;\n}\n\n#left-playing-div .main-grid-div::before {\n  position: absolute;\n  content: "For rotating ships click them.";\n  transform: translate(0, -100%);\n}\n\n.cell {\n  background-color: rgb(235, 235, 235);\n}\n\n#left-playing-div .cell.ship {\n  background-color: var(--first-ply-clr);\n}\n\n#right-playing-div .cell.ship {\n  background-color: var(--second-ply-clr);\n}\n\n.cell img {\n  width: 100%;\n}\n\n.cell.ship img {\n  filter: brightness(0) saturate(100%) invert(22%) sepia(45%) saturate(2438%)\n    hue-rotate(339deg) brightness(72%) contrast(106%);\n}\n\n.error-div {\n  position: fixed;\n  display: inline-block;\n  background-color: #ff7171;\n  color: #000000;\n  padding: 10px 20px;\n  top: 30px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  box-sizing: border-box;\n  border-radius: 20px;\n  box-shadow: 0 0 13px -4px;\n}\n\n.win-div {\n  position: fixed;\n  padding: 20px;\n  width: 50vw;\n  background-color: rgb(149, 255, 149);\n  text-align: center;\n  bottom: 50%;\n  left: 50%;\n  transform: translate(-50%, 0);\n  border-radius: 30px;\n}\n\n.win-p {\n  font-size: 3rem;\n}\n\n.win-btn {\n  font-size: 2rem;\n  padding: 10px;\n  border-radius: 10px;\n}\n\n.ship-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.display-ship {\n  display: flex;\n  gap: 1px;\n}\n\n.display-ship.vertical {\n  flex-direction: column;\n}\n\n.display-ship.on-grid {\n  position: absolute;\n}\n\n.display-ship.transparent {\n  pointer-events: none;\n}\n\n#left-playing-div .display-ship div {\n  background-color: var(--first-ply-clr);\n}\n\n#right-playing-div .display-ship div {\n  background-color: var(--second-ply-clr);\n}\n\n.fnct-btn-div {\n  z-index: 0;\n  grid-row: 2;\n  grid-column: 1;\n  align-self: start;\n  display: flex;\n  gap: 20px;\n}\n\n.fnct-btn {\n  background-color: var(--first-ply-clr);\n  font-size: 1.2rem;\n  padding: 5px;\n  border-radius: 10px;\n  border: none;\n  border-bottom: 4px solid rgb(46, 112, 143);\n}\n\n.fnct-btn:active {\n  background-color: rgb(46, 112, 143);\n}\n\n.play-btn {\n  font-size: 3rem;\n  position: fixed;\n  bottom: 100px;\n  border: none;\n  background-color: #a4ffa4;\n  border-radius: 20px;\n  padding: 10px 50px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  border-bottom: 5px solid #77c577;\n}\n\n.play-btn:active {\n  background-color: #77c577;\n}\n\n#action-text {\n  position: fixed;\n  top: 5%;\n  left: 50%;\n  transform: translate(-50%, 0);\n  text-align: center;\n  font-size: 2rem;\n  font-weight: 400;\n}\n`,""]);const f=p},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);i&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},417:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{"use strict";t.exports=function(t){return t[1]}},224:function(t,e,n){t=n.nmd(t),function(n){"use strict";var i={};n.PubSub?(i=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=i,function(t){var e={},n=-1,i="*";function r(t,e,n){try{t(e,n)}catch(t){setTimeout(function(t){return function(){throw t}}(t),0)}}function o(t,e,n){t(e,n)}function s(t,n,i,s){var a,c=e[n],l=s?o:r;if(Object.prototype.hasOwnProperty.call(e,n))for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&l(c[a],t,i)}function a(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(e,n)&&function(t){var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}(e[n]))}function c(t,e,n,r){var o=function(t,e,n){return function(){var r=String(t),o=r.lastIndexOf(".");for(s(t,t,e,n);-1!==o;)o=(r=r.substr(0,o)).lastIndexOf("."),s(t,r,e,n);s(t,i,e,n)}}(t="symbol"==typeof t?t.toString():t,e,r);return!!function(t){for(var e=String(t),n=a(e)||a(i),r=e.lastIndexOf(".");!n&&-1!==r;)r=(e=e.substr(0,r)).lastIndexOf("."),n=a(e);return n}(t)&&(!0===n?o():setTimeout(o,0),!0)}t.publish=function(e,n){return c(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return c(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,i){if("function"!=typeof i)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(e,t)||(e[t]={});var r="uid_"+String(++n);return e[t][r]=i,r},t.subscribeAll=function(e){return t.subscribe(i,e)},t.subscribeOnce=function(e,n){var i=t.subscribe(e,(function(){t.unsubscribe(i),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&delete e[n]},t.countSubscriptions=function(t){var n,i,r=0;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)){for(i in e[n])r++;break}return r},t.getSubscriptions=function(t){var n,i=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&i.push(n);return i},t.unsubscribe=function(n){var i,r,o,s="string"==typeof n&&(Object.prototype.hasOwnProperty.call(e,n)||function(t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t))return!0;return!1}(n)),a=!s&&"string"==typeof n,c="function"==typeof n,l=!1;if(!s){for(i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(r=e[i],a&&r[n]){delete r[n],l=n;break}if(c)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&r[o]===n&&(delete r[o],l=!0)}return l}t.clearSubscriptions(n)}}(i)),void 0!==t&&t.exports&&(e=t.exports=i),e.PubSub=i,t.exports=e=i}("object"==typeof window&&window||this)},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var c=t[a],l=i.base?c[0]+i.base:c[0],d=o[l]||0,h="".concat(l," ").concat(d);o[l]=d+1;var p=n(h),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var m=r(u,i);i.byIndex=a,e.splice(a,0,{identifier:h,updater:m,references:1})}s.push(h)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var c=i(t,r),l=0;l<o.length;l++){var d=n(o[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=c}}},659:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},922:(t,e,n)=>{"use strict";t.exports=n.p+"acec548fe91eb44dc612.woff"},644:(t,e,n)=>{"use strict";t.exports=n.p+"790f0fd94a4e55658ee0.woff2"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{"use strict";n.d(i,{OQ:()=>Z,P:()=>U,eq:()=>G,cL:()=>H,zj:()=>Y,wC:()=>B});var t=n(72),e=n.n(t),r=n(825),o=n.n(r),s=n(659),a=n.n(s),c=n(56),l=n.n(c),d=n(540),h=n.n(d),p=n(113),u=n.n(p),m=n(365),f={};f.styleTagTransform=u(),f.setAttributes=l(),f.insert=a().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h(),e()(m.A,f),m.A&&m.A.locals&&m.A.locals;var g,v=n(224),b=n.n(v);!function(t){t[t.PLAYER_TURN=0]="PLAYER_TURN",t[t.COMPUTER_TURN=1]="COMPUTER_TURN",t[t.PLACING_SHIPS=2]="PLACING_SHIPS"}(g||(g={}));class y{constructor(t,e){this.hp=t,this.publish=e}hit(){if(!this.hp)throw new Error("Ship already sank");this.hp--,this.hp||b().publishSync(this.publish)}isSunk(){return!this.hp}}class w{constructor(){this.aliveShips=0,this.ships=[];for(let t=0;t<w.BOARD_SIZE;t++){this[t]={};for(let e=0;e<w.BOARD_SIZE;e++)this[t][e]=new E}}place(t,e,n,i=!1){this.checkPlace(t,e),this.checkLength(t,e,n,i);let r=[];const o="board-channel-"+w.shipId++,s=new y(n,o);b().subscribe(o,(()=>this.sinkAnother())),this.ships.push([...arguments,s]);try{if(i)for(let i=0;i<n;i++)this.checkPlace(t+i,e),this[t+i][e].makeShip(s),r.push(this[t+i][e]);else for(let i=0;i<n;i++)this.checkPlace(t,e+i),this[t][e+i].makeShip(s),r.push(this[t][e+i]);this.aliveShips++}catch(t){throw r.forEach((t=>t.unmakeShip())),this.ships.pop(),t}}isShip(t,e){return this[t][e].isShip()}checkPlace(t,e){if(t<0||t>w.BOARD_SIZE-1||e<0||e>w.BOARD_SIZE-1)throw new Error("Wrong ship coordinates");if(this[t][e].isShip())throw new Error("Cell already occupied")}checkLength(t,e,n,i){if(n<1||!i&&e+n-1>w.BOARD_SIZE-1)throw new Error("Ship too long");if(i&&t+n-1>w.BOARD_SIZE-1)throw new Error("Ship too long")}receiveAttack(t,e){if(this[t][e].isChecked())throw new Error("Cell already checked");return this[t][e].check(),this[t][e].isShip()&&this[t][e].ship.hit(),this.isShip(t,e)}areAllSunk(){return!this.aliveShips}sinkAnother(){this.aliveShips--}getAllShips(){return this.ships}remove(t,e,n,i=!1){for(let r=0;r<n;r++){let n=t,o=e;i?n=t+r:o=e+r,this[n][o]=new E}this.sinkAnother()}}w.shipId=0,w.BOARD_SIZE=10;const S=new class{constructor(){this.state=g.PLAYER_TURN,this._stateChangeEvent=new CustomEvent("game_state_changed")}changeState(t){this.state=t,dispatchEvent(this._stateChangeEvent)}get stateChangeEvent(){return this._stateChangeEvent}};class E{constructor(){this.checked=!1,this.ship=!1}makeShip(t){this.ship=t}unmakeShip(){this.ship=!1}isShip(){return!!this.ship}isChecked(){return this.checked}check(){this.checked=!0}}class x{constructor(){this.board=new w}placeShips(){let t=0;const e=[5,4,3,3,2];for(;t<e.length;)try{const n=this.getRandomCoords(),i=this.getRandomCoords(),r=!!Math.floor(2*Math.random());this.board.place(n,i,e[t],r),t++}catch(t){continue}}getRandomCoords(){return Math.floor(Math.random()*(w.BOARD_SIZE+1))}}class C extends x{constructor(){super(),this.placeShips(),this.createGuesses()}guessRandom(){return this.guesses.pop()}createGuesses(){return t=this,e=void 0,i=function*(){this.guesses=[];for(let t=0;t<w.BOARD_SIZE;t++)for(let e=0;e<w.BOARD_SIZE;e++)this.guesses.push([t,e]);!function(t){let e=t.length-1;for(;e>0;){const n=Math.floor(t.length*Math.random()),i=t[n],r=t[e];t[e]=i,t[n]=r,e--}}(this.guesses)},new((n=void 0)||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}));var t,e,n,i}}!function(){const t={[g.PLAYER_TURN]:"Its your turn, click on oppents board to attack his ships",[g.COMPUTER_TURN]:"Wait for the opponent to finsih attacking",[g.PLACING_SHIPS]:"Hello, place your ships and click play to start!"},e=document.createElement("h1");e.id="action-text",e.textContent=t[g.PLACING_SHIPS],document.body.appendChild(e),addEventListener(S.stateChangeEvent.type,(()=>{e.textContent=t[S.state]}))}();class k{static SIZE=10;constructor(){this.mainDiv=document.createElement("div"),this.mainDiv.className="main-grid-div",this.mainDiv.setAttribute("data-size",k.SIZE);for(let t=0;t<k.SIZE;t++)for(let e=0;e<k.SIZE;e++){const n=document.createElement("div");n.className="cell",n.setAttribute("data-row",t),n.setAttribute("data-col",e),this.mainDiv.appendChild(n)}}getElement(){return this.mainDiv}}class P{constructor(t){this.container=document.createElement("div"),this.container.classList.add("ship-container"),t&&t.isOpponent?this.container.classList.add("opponent"):this.container.classList.add("player")}getElement(){return this.container}}!function(){const t=document.createElement("div"),e=document.createElement("div"),n=new k,i=new k,r=document.createElement("p"),o=document.createElement("p"),s=new P,a=new P({isOpponent:!0});t.className="playing-div",t.id="left-playing-div",e.className="playing-div",e.id="right-playing-div",r.textContent="Player",r.classList.add("turn"),o.textContent="Computer",t.appendChild(n.getElement()),t.appendChild(r),t.appendChild(s.getElement()),e.appendChild(i.getElement()),e.appendChild(o),e.appendChild(a.getElement()),document.querySelector(".content").appendChild(t),document.querySelector(".content").appendChild(e)}();class A{constructor(t){const e=document.createElement("div"),n=document.createElement("p");e.className="error-div",n.className="error-p",n.textContent=t,e.appendChild(n),this.div=e}show(t){document.body.appendChild(this.div),t&&setTimeout((()=>this.remove()),t)}remove(){this.div.remove()}}class L{static winDiv=document.createElement("div");static create(t,e,n){const i=document.createElement("p"),r=document.createElement("button");L.winDiv.className="win-div",i.className="win-p",i.textContent=`${t} won! With ${e} boats left!`,r.className="win-btn",r.textContent="Play again",r.addEventListener("click",(()=>{L.remove(),n(),S.changeState(g.PLACING_SHIPS)})),L.winDiv.appendChild(i),L.winDiv.appendChild(r),document.body.appendChild(L.winDiv)}static remove(){L.winDiv.textContent="",document.body.removeChild(L.winDiv)}}class O{static buttonsDiv=document.createElement("div");static createRandom(){const t=document.createElement("button");t.textContent="random",t.className="fnct-btn",t.addEventListener("click",(()=>G())),O.buttonsDiv.appendChild(t)}static createReset(){const t=document.createElement("button");t.textContent="reset",t.className="fnct-btn",t.addEventListener("click",(()=>H())),O.buttonsDiv.appendChild(t)}static create(){O.buttonsDiv.className="fnct-btn-div",document.querySelector("#left-playing-div").appendChild(O.buttonsDiv),O.createRandom(),O.createReset()}}class I{constructor(){this.btn=document.createElement("button"),this.btn.className="play-btn",this.btn.textContent="Play!",this.btn.addEventListener("click",(()=>{Y()&&this.btn.remove()})),document.body.appendChild(this.btn)}}O.create();const R=n.p+"85a7d14e6ea4a9556026.svg";class N{static cellClickEvents=[];static cellDragEvents=[];static cellDropEvents=[];constructor(t){this.div=t}showShip(t,e,n,i=!1){for(let r=0;r<n;r++){let n;n=i?this.div.querySelector(`[data-row="${t+r}"][data-col="${e}"]`):this.div.querySelector(`[data-row="${t}"][data-col="${e+r}"]`),n.classList.add("ship")}}reviewEmpty(t,e){const n=this.div.querySelector(`[data-row="${t}"][data-col="${e}"]`),i=document.createElement("img");i.src=R,n.appendChild(i)}reviewShip(t,e){const n=this.div.querySelector(`[data-row="${t}"][data-col="${e}"]`),i=document.createElement("img");i.src=R,n.classList.add("ship"),n.appendChild(i)}static clearGrid(t){(t||document.body).querySelectorAll(".cell").forEach((t=>{t.textContent="",t.className="cell"}))}static displayTurn(){const t=document.querySelector("#left-playing-div p"),e=document.querySelector("#right-playing-div p");t.classList.toggle("turn"),e.classList.toggle("turn")}makeCellsAcceptDrag(){this.div.querySelectorAll(".cell").forEach((t=>{const e=t=>{const e=T.picked,n=+t.target.getAttribute("data-row"),i=+t.target.getAttribute("data-col");let r=n,o=i;e.vertical?(r=n-e.cellFrom>-1?n-e.cellFrom:0,r=r>10-e.length?10-e.length:r):(o=i-e.cellFrom>-1?i-e.cellFrom:0,o=o>10-e.length?10-e.length:o),this.div.querySelector(`[data-row="${r}"][data-col="${o}"]`).appendChild(e.getElement()),e.place(r,o)},n=t=>{try{U.logic.board.place(...T.picked.getPlacingValue())}catch(e){new A(e).show(1e3),T.picked.sendBack(t,!0)}};N.cellDragEvents.push([t,e]),N.cellDropEvents.push([t,n]),t.addEventListener("dragover",(t=>t.preventDefault())),t.addEventListener("dragenter",e),t.addEventListener("drop",n)}))}static addListenersToCells(t=!0){let e=document;t&&(e=document.querySelector("#right-playing-div")),e.querySelectorAll(".cell").forEach((t=>{const e=()=>{(B.isPlaying()||(document.querySelector(".play-btn").click(),B.isPlaying()))&&Z(+t.getAttribute("data-row"),+t.getAttribute("data-col"),document.getElementById("left-playing-div").contains(t))};N.cellClickEvents.push([t,e]),t.addEventListener("click",e)}))}static removeCellsListeners(){N.cellClickEvents.forEach((t=>t[0].removeEventListener("click",t[1]))),N.cellClickEvents=[]}static removeDragListeners(){N.cellDragEvents.forEach((t=>t[0].removeEventListener("dragenter",t[1]))),N.cellDropEvents.forEach((t=>t[0].removeEventListener("drop",t[1]))),N.cellDragEvents=[],N.cellDropEvents=[]}}class D{constructor(t,e,n=!1,i=!1){if(this.div=t,this.container=t.querySelector(".ship-container"),this.container.textContent="",this.computer=n,n)this.ships=e.ships,this.ships.sort(((t,e)=>e[2]-t[2])),this.ships.forEach((t=>{const e=this.createShip(t[2]);this.container.appendChild(e),b().subscribe(t[4].publish,(()=>{e.remove()}))}));else if(!i)for(let t of[5,4,3,3,2]){const e=new T(t);this.container.appendChild(e.getElement())}}createShip(t){const e=document.createElement("div"),n=getComputedStyle(this.div.querySelector(".cell")).height;for(let i=0;i<t;i++){const t=document.createElement("div");t.style.height=n,t.style.width=n,e.appendChild(t)}return e.className="display-ship",e}getElement(){return this.container}}class T{static picked;static shipId=0;constructor(t){this.length=t,this.m=null,this.n=null,this.shipId=T.shipId,this.vertical=!1,T.shipId++,this.cellFrom=0,this.create()}create(){this.main=document.createElement("div"),this.main.className="display-ship",this.main.draggable=!0;const t=`dragship-${this.shipId}`;for(let e=0;e<this.length;e++){const n=new _(e,t);this.main.appendChild(n.getElement())}b().subscribe(t,((t,e)=>{this.cellFrom=e})),this.main.addEventListener("drag",(()=>{this.getElement().classList.add("transparent"),T.picked=this})),this.main.addEventListener("dragenter",(t=>t.stopPropagation())),this.main.addEventListener("click",(t=>this.rotate(t))),this.main.addEventListener("dragend",(t=>this.sendBack(t))),this.main.addEventListener("dragstart",(()=>this.clear()))}clear(){null!==this.m&&null!==this.n&&U.logic.board.remove(...this.getPlacingValue())}rotate(t){try{this.clear(),this.vertical=!this.vertical,this.main.classList.toggle("vertical"),null!==this.m&&null!==this.n&&U.logic.board.place(...this.getPlacingValue())}catch(e){new A(e).show(1e3),this.sendBack(t,!0)}}sendBack(t,e=!1){this.getElement().classList.remove("transparent"),(e||"none"===t.dataTransfer.dropEffect)&&(this.getElement().classList.remove("on-grid"),document.querySelector("#left-playing-div .ship-container").appendChild(this.getElement()),this.resetCoords())}getElement(){return this.main}place(t,e){this.getElement().classList.add("on-grid"),this.m=t,this.n=e}resetCoords(){this.m=null,this.n=null}getPlacingValue(){return[this.m,this.n,this.length,this.vertical]}}class _{constructor(t,e){this.id=t,this.publish=e,this.create()}create(){this.main=document.createElement("div");const t=getComputedStyle(document.querySelector(".cell")).height;this.main.style.height=t,this.main.style.width=t,this.main.addEventListener("mousedown",(()=>{b().publish(this.publish,+this.id)}))}getElement(){return this.main}}const z=new N(document.querySelector("#left-playing-div .main-grid-div")),q=new N(document.querySelector("#right-playing-div .main-grid-div"));const j="win";class M{constructor(t,e){this.left=t,this.right=e,this.next=t,this.play=!1}isLeftTurn(){return this.next===this.left}getNext(){return this.next}getNextAttacked(){return this.next==this.left?this.right:this.left}changeTurn(){N.displayTurn(),this.next===this.left?(S.changeState(g.COMPUTER_TURN),this.next=this.right,function(){var t,e,n,i;t=this,e=void 0,i=function*(){for(;!B.isLeftTurn();){const t=B.getNext().logic.guessRandom();yield new Promise((t=>setTimeout(t,1e3))),Z(t[0],t[1],!0)}},new((n=void 0)||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))}()):(this.next=this.left,S.changeState(g.PLAYER_TURN))}isComputerPlaying(){return this.right.logic instanceof C}isPlaying(){return this.play}startPlaying(){this.play=!0,S.changeState(g.PLAYER_TURN),N.removeDragListeners()}}let U,$,B;function F(){N.clearGrid(),U={logic:new x,grid:z,name:"Player"},$={logic:new C,grid:q,name:"Computer"},new I,B=new M(U,$),U.container=new D(document.querySelector("#left-playing-div"),U.logic.board),$.container=new D(document.querySelector("#right-playing-div"),$.logic.board,B.isComputerPlaying()),U.grid.makeCellsAcceptDrag(),N.removeCellsListeners(),N.addListenersToCells(B.isComputerPlaying())}function Z(t,e,n){if(B.isLeftTurn()!==n)try{const n=B.getNextAttacked();n.logic.board.receiveAttack(t,e)?(n.grid.reviewShip(t,e),n.logic.board.areAllSunk()&&b().publish(j,{winnerName:B.getNext().name,winnerShipNumber:B.getNext().logic.board.aliveShips})):(n.grid.reviewEmpty(t,e),B.changeTurn())}catch(t){new A(t).show(2e3)}else B.isComputerPlaying()||new A("Please select one cell of opponents grid").show(2e3)}function G(){B.isPlaying()?new A("Game already started").show(1e3):(N.removeDragListeners(),N.clearGrid(document.querySelector("#left-playing-div")),U={logic:new x,grid:z,name:"Player"},B=new M(U,$),U.container=new D(document.querySelector("#left-playing-div"),U.logic.board,!1,!0),U.logic.placeShips(),U.logic.board.getAllShips().forEach((t=>U.grid.showShip(...t))))}function H(){B.isPlaying()?new A("Game already started").show(1e3):(U.grid.makeCellsAcceptDrag(),N.clearGrid(document.querySelector("#left-playing-div")),U={logic:new x,grid:z,name:"Player"},B=new M(U,$),U.container=new D(document.querySelector("#left-playing-div"),U.logic.board))}function Y(){return U.container.getElement().childNodes.length?(new A("Place your ships to start game!").show(1500),!1):(B.startPlaying(),!0)}F(),b().subscribe(j,(function(t,e){L.create(e.winnerName,e.winnerShipNumber,(()=>F()))}))})()})();